### What is PowerShell-Empire ?

+ PowerShell-Empire (Aka Empire) is a pure PowerShell exploitation/post-exploitation framework built on cryptological-secure communications and flexible architecture.

+ Empire implements the ability to run PowerShell agents without needing powershell.exe, rapidly deployable post-exploitation modules ranging from keyloggers to Mimikatz, and adaptable communications to evade network detection, all wrapped up in a usability-focused framework.

+ PowerShell Empire recently received an update and is now officially support and maintained by Kali Linux, more information regarding the update can be found here:
https://www kali.org/blog/empire-starkiller/

### What is Starkiller ?

+ In addition to being updated and modernized, BC Security, the company responsible, for maintaining the Empire has also developed a companion to Empire called Starkiller. 

+ Starkiller is a GUI Frontend for the Powershell Empire. It is an Electron application written in VuelS and provides users with an intuitive way of interacting with Empire.

+ In order to get an understanding of how Empire works and the components that make up the framework, I would recommend going through the official documentation which can be found here: https:/www.powershellempire.com/ 

+ PowerShell-Empire & Starkiller are both available as packages in the Kali Linux repositories.

### How to use Empire ?

1. Install PowerShell-Empire and Starkiller.
```
sudo apt-get update && sudo apt-get install powershell-empire starkiller -y
```

2. Start PowerShell-Empire server.
```
sudo powershell-empire server
```
- It is important to keep the server running and perform other tasks in a different tab.

3. Start up the PowerShell-Empire client.
```
sudo powershell-empire client
```

### How to use `Starkiller` ?

1. We can access the GUI version of Empire i.e `Starkiller` using our application menu. 

2. After launching the Starlink application, provide the login credentials.
	+ The default URL will be set to `https://localhost:1337`.
	+ The default username is `empireadmin`.
	+ The default password is `password123`.

3. We have a collapsible side-bar to the left. We can access various utilities there, for example Listeners, Stagers, Settings etc.

4. We can also access the various modules coded in different languages from the side-bar.

5. We can also access the Agents menu. It shows us the systems we've exploited or the systems on which a stager has been run on. It is updated dynamically. 

6. To get started, we can first create a listener from the side-bar. 
	+ Set the listener `Type` to `HTTP`.
	+ Set `Host` to our Linux machine IP.
	+ Set the `Port` using the drop down menu.

7. Now we'll set our stager.
	+ We can select the `windows/csharp_exe` stager. This will create a Windows executable which will connect back to our listener.
	+ Set the listener to `http`.
	+ We can change the `OutFile` to change the name of the stager which will be created.
	+ Now we can click `SUBMIT` button on the top left to begin compiling.

8. After successful compilation, we can download the stager and send it to the target system using `SimpleHTTPServer`. 

9. We can now go back to the `Agents` menu, we should see the connection if the target executes the stager. 
	+ We can click the `Agent` and execute Shell Commands on the target system.
	+ We can also check out the `File Browser` to navigate the file system using a GUI.

10. Sometimes we might have problems with executing the shell command using `Starkiller`, due to which we have to revert back to using the Empire client. 
	+ After the target executes the stager, we should see in the Client that a new agent has checked in, indicating that a connection has been established.
	+ We can use `agents` command to check the list of active agents.
	+ We can interact with a agent using `interact <agent-name>`.



