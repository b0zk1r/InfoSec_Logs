
### Persistence Via SSH Keys

+ Linux is typically deployed as a server operating system and as a result, Linux servers are typically accessed remotely via services/protocols such as SSH.

+ If SSH is enabled and running on a Linux system you have compromised, you can take advantage of the SSH configuration to establish persistent access on the target system.

+ In most cases Linux servers will have key-based authentication enabled for the SSH service, allowing users to access the Linux system remotely without the need for a password.

+ After gaining access to a Linux system, we can transfer the SSH private key of a specific user account to our system and use that SSH private key for all future authentication and access. 

### How to perform ?

1. We're assuming that we've already gained initial access to the system using SSH.

2. Whenever we generate a SSH key pair with an utility like `ssh-keygen`, it'll generate 2 files, `id_rsa` which is the private key and the `id_rsa.pub` file, which is the public key. In our case, the target system has a `id_rsa` private key file inside the `.ssh` hidden directory. 

3. We'll download the `id_rsa` private key file from the target machine using the `scp` utility.
```
scp <username>@<target-ip>:/path/to/file . 
```

4. After downloading we'll give the file necessary permissions using `chmod 400 id_rsa`

5. Now, if the SSH password gets reset, we can login using the `id_rsa` private key.
```
ssh -i id_rsa <username>@<target-ip>
```

6. In an ideal scenario, we would generate a SSH key pair in our system, keep the private with us and transfer the public key to the target system and add it to the authorised keys in the target's SSH directory. 