
### How to enumerate users and groups on Linux ?

1. Gain initial access.

2. To check whether if we have root access to the target, we can use the `getuid` command in the `meterpreter` shell. If the `uid` is 0, we have root access.

3. To check which group a particular user is part of, we can use `groups <username>` in the command shell. This way we can check which users are part of the `root` group.

4. To enumerate the other users on the system, we can use `cat /etc/passwd`. This will display the contents of the `passwd` file. It contains the list of all the user and service accounts in the system. 
	+ We can differentiate between a user and a service account by taking a look at the shell which has been configured for that particular account. 
	+ If it's an user account, the shell will be `/bin/bash`. 
	+ If it's an service account, the shell will be `/usr/sbin/nologin`.
	+ Service accounts are generally setup to manage a particular service. These accounts cannot be used to gain access to the system.
	![image](https://github.com/B4PHOM3T/eJPT-Notes/assets/89618500/e6b0d8a2-16f6-450f-bf95-68b69c1f586e)
	+ If we only want to enumerate the user accounts we can use the `grep` utility. `cat /etc/passwd | grep -v /nologin`.

5. We can create a new user with root privileges using 
```
useradd -m <username> -s /bin/bash
```

7. We can add a particular user to a group:
```
usermod -aG <group-name> <username>
```

8. We can check the list of the currently logged on users using the `last` command. It only shows the users who have logged in legitimately with SSH or physically. 

9. The `lastlog` command will show us the list of users who logged in previously. 
